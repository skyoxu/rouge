  您的项目类型: Godot 4 AI 社交模拟游戏BMAD 适用场景: 复杂功能开发、系统架构优化、游戏设计迭代

  推荐使用 BMAD Method Track (BMM) 用于:
  - 新角色 AI 行为系统的扩展
  - 对话系统的优化和重构
  - 记忆系统的增强
  - 多智能体交互逻辑的改进

  2️⃣ BMAD 工作流集成方案

  场景 A: 小功能快速修复 ⚡ Quick Flow Track

  # 适用于: Bug修复、UI调整、小功能添加
  # 示例: 修复角色移动卡顿、调整对话气泡显示

  # 启动 Quick Flow
  /bmad:bmm:workflows:quick-spec

  # BMAD 会生成技术规范 → 直接实现 → 快速验证

  实践要点:
  - 用于单个脚本的修改(如 AIAgent.gd 中的小调整)
  - 不需要完整 PRD,只需技术文档
  - 2-3 小时内完成的任务

  ---
  场景 B: 中等功能开发 📋 BMad Method Track

  # 适用于: 新的AI行为模式、新角色添加、对话系统扩展
  # 示例: 添加角色情绪影响决策的系统

  # 启动完整 BMAD 流程
  /bmad:bmm:workflows:workflow-init
  # 选择 BMad Method Track

  # Phase 2: Planning
  /bmad:bmm:workflows:prd  # 生成产品需求文档

  # Phase 3: Solutioning
  /bmad:bmm:workflows:architecture  # 系统架构设计
  /bmad:bmm:workflows:ux-design     # 用户体验设计(可选)

  # Phase 4: Implementation
  /bmad:bmm:workflows:dev-story  # 逐个功能实现

  实践要点:
  - 用于跨多个脚本的功能(如 AIAgent.gd + DialogManager.gd + MemoryManager.gd)
  - 需要完整的需求分析和架构设计
  - 1-2 周开发周期

  ---
  场景 C: 现有代码优化 🏢 Brownfield Guide

  # 适用于: 重构现有系统、性能优化、技术债务清理

  # 首先记录现有系统
  /bmad:bmm:workflows:brownfield-documentation

  # 然后选择改进路径
  /bmad:bmm:workflows:workflow-init
  # 根据规模选择 Quick Flow 或 BMad Method

  实践要点:
  - 先用 BMAD 分析现有代码结构(如 AIAgent.gd 的 2214 行代码)
  - 生成重构文档
  - 逐步优化,保持系统稳定性

  ---
  3️⃣ 针对您项目的具体实践建议

  优先使用 BMAD 的场景:

  | 任务类型           | BMAD 工作流                 | 预期产出            |
  |----------------|--------------------------|-----------------|
  | 优化 AI 决策逻辑     | Quick Flow               | 技术规范 + 代码实现     |
  | 新增角色行为模式       | BMad Method              | PRD + 架构 + 实现   |
  | 重构对话系统         | Brownfield + BMad Method | 文档 + 重构方案 + 代码  |
  | 添加新的记忆类型       | BMad Method              | PRD + 数据模型 + 实现 |
  | 性能优化(如 API 调用) | Quick Flow               | 技术方案 + 优化代码     |

  ---
  与您现有代码的集成点:

  1. AIAgent.gd (2214行) - 核心 AI 逻辑
  # 使用 BMAD 优化决策逻辑
  # 推荐工作流: /bmad:bmm:workflows:quick-spec
  #
  # 改进方向:
  # - 简化 API 调用链
  # - 优化任务决策算法
  # - 减少函数复杂度

  2. CharacterPersonality.gd - 角色人设系统
  # 使用 BMAD 扩展角色系统
  # 推荐工作流: /bmad:bmm:workflows:prd + architecture
  #
  # 改进方向:
  # - 动态人设生成
  # - 人设关系网络可视化
  # - 情感状态影响系统

  3. DialogManager.gd - 对话管理
  # 使用 BMAD 重构对话流程
  # 推荐工作流: /bmad:bmm:workflows:brownfield-documentation
  #
  # 改进方向:
  # - 对话上下文管理
  # - 多轮对话优化
  # - 对话历史分析

  ---
  4️⃣ 学习路径规划

  Week 1: 熟悉 BMAD 基础
  # 1. 安装 BMAD (已完成)
  cd C:/buildgame/aicity/BMAD-METHOD
  npm install

  # 2. 运行初始化向导
  /bmad:core:workflows:workflow-init

  # 3. 尝试 Quick Flow 修复一个小 Bug
  /bmad:bmm:workflows:quick-spec
  # 提示词: "修复AIAgent.gd中角色移动到目标位置后没有停止的问题"

  Week 2: 实践中等功能开发
  # 4. 使用 BMad Method 添加新功能
  /bmad:bmm:workflows:prd
  # 提示词: "为AI角色添加基于心情的决策权重调整系统"

  # 5. 学习架构设计工作流
  /bmad:bmm:workflows:architecture

  Week 3: 代码重构实战
  # 6. 记录现有系统
  /bmad:bmm:workflows:brownfield-documentation
  # 提示词: "分析AIAgent.gd的代码结构,提出优化建议"

  # 7. 执行重构
  /bmad:bmm:workflows:dev-story
  # 提示词: "将make_decision()函数拆分为更小的独立函数"

  ---
  5️⃣ 关键实践经验

  ✅ DO (推荐做法):

  1. 使用 Party Mode 讨论复杂设计
  /bmad:core:workflows:party-mode
  # 让多个 BMAD 代理讨论 AI 决策逻辑的优化方案
  2. 使用文档分片优化大文件
  # 对于 AIAgent.gd (2214行)
  # BMAD 会自动分片,减少 90% token 使用
  3. 利用 BMAD 生成测试用例
  /bmad:bmm:workflows:test-strategy
  # 为关键功能生成自动化测试

  ❌ DON'T (避免做法):

  1. 不要用 BMAD 做简单的代码复制粘贴
  2. 不要跳过 PRD 直接进入实现(除非是 Quick Flow)
  3. 不要在没有测试的情况下重构核心代码

  ---
  6️⃣ 实战示例: 优化 AI 决策系统

  # Step 1: 启动 BMAD 向导
  /bmad:bmm:workflows:workflow-init

  # 提示: "我想优化AIAgent.gd中的make_decision()函数,
  #       它现在有300多行代码,逻辑复杂,需要重构为更模块化的结构"

  # Step 2: BMAD 会推荐 Brownfield + BMad Method
  /bmad:bmm:workflows:brownfield-documentation

  # Step 3: 生成重构方案
  /bmad:bmm:workflows:architecture

  # Step 4: 逐步实现
  /bmad:bmm:workflows:dev-story
  # Story 1: 提取任务决策逻辑
  # Story 2: 提取对话决策逻辑
  # Story 3: 提取移动决策逻辑

  # Step 5: 测试验证
  /bmad:bmm:workflows:test-strategy

  ---
  7️⃣ 推荐配置

  在 C:/buildgame/aicity/BMAD-METHOD/_cfg/agents/ 中自定义代理:

  # game-dev.yaml (游戏开发专用代理)
  name: GameDev Specialist
  role: Godot 4 AI Game Development Expert
  expertise:
    - GDScript optimization
    - AI agent systems
    - Multi-agent coordination
    - Memory management
    - Dialog systems
  language:
    communication: zh-CN  # 中文沟通
    output: mixed         # 代码英文,注释中文

  ---
  📌 总结: 您的下一步行动

  1. 立即尝试: 用 Quick Flow 修复一个小问题cd C:/buildgame/aicity/BMAD-METHOD && /bmad:bmm:workflows:quick-spec
  2. 本周目标: 用 BMad Method 开发一个中等功能例如: "添加角色疲劳度系统,影响 AI 决策"
  3. 长期规划: 用 Brownfield 重构核心代码优先级: AIAgent.gd > DialogManager.gd > MemoryManager.gd

  需要我详细演示某个具体场景的 BMAD 使用流程吗?