# Task 2 Context (regenerated)

- generated_at: 2026-01-13T16:20:15
- task_id: 2
- title: 实现牌堆系统 (Deck/Hand/Discard/Exhaust)
- overlay: `docs/architecture/overlays/PRD-rouge-manager/08/08-Feature-Slice-Minimum-Playable-Loop.md`
- adrRefs: ADR-0004, ADR-0011, ADR-0018, ADR-0021, ADR-0024
- archRefs: CH01, CH04, CH06, CH07, CH10

## Contracts
- `core.card.drawn` -> `Game.Core/Contracts/Rouge/Cards/CardDrawn.cs`
- `core.card.discarded` -> `Game.Core/Contracts/Rouge/Cards/CardDiscarded.cs`

## Code Paths
- `Game.Core/Domain/CardPile.cs`
- `Game.Core/Contracts/Rouge/Cards/CardDrawn.cs`
- `Game.Core/Contracts/Rouge/Cards/CardDiscarded.cs`

## Tests
- `Game.Core.Tests/Domain/CardPile/CardPileModelingTests.cs`
- `Game.Core.Tests/Domain/CardPile/CardPileBattleFlowTests.cs`
- `Game.Core.Tests/Domain/CardPile/CardPilePerfRegressionTests.cs`
- `Game.Core.Tests/Domain/CardPile/CardPileTests.cs`
- `Game.Core.Tests/Domain/CardPile/CardPileBranchCoverageTests.cs`
- `Game.Core.Tests/Domain/CardPile/CardPileErrorHandlingTests.cs`
- `Game.Core.Tests/Contracts/Rouge/RougeRunEventsContractsTests.cs`

## contractRefs (view)
- `core.battle.turn.player.started`
- `core.card.played`
- `core.card.drawn`
- `core.card.discarded`

## Notes
- This file is regenerated from current repo state to avoid stale context drift.
- Contracts follow ADR-0004; event payloads are JSON (DomainEvent.DataJson).
- CardPile models card instances via CardRef (instance id + definition id).
